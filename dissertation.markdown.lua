local ran_ok, error = pcall(function() local ran_ok, kpse = pcall(require, "kpse") if ran_ok then kpse.set_program_name("luatex") end local lfs = require("lfs") local cacheDir = "/tmp" if not lfs.isdir(cacheDir) then assert(lfs.mkdir(cacheDir)) end local md = require("markdown") local convert = md.new({cacheDir = "/tmp", citations = true, citationNbsps = true, contentBlocks = true, definitionLists = true, frozenCacheFileName = "/tmp/frozenCache.tex", frozenCacheCounter = 0, hashEnumerators = true, headerAttributes = true, hybrid = true, inlineFootnotes = true, pipeTables = true, smartEllipses = true, tableCaptions = true, } ) local file = assert(io.open("./Dissertation/md/appendix.md", "r"), [[could not open file "./Dissertation/md/appendix.md" for reading]]) local input = assert(file:read("*a")) assert(file:close()) print(convert(input:gsub("\r\n?", "\n") .. "\n")) end) if not ran_ok then local file = io.open("./dissertation.markdown.err", "w") if file then file:write(error .. "\n") file:close() end print('\\markdownError{An error was encountered while executing Lua code}{For further clues, examine the file "./dissertation.markdown.err"}') end
